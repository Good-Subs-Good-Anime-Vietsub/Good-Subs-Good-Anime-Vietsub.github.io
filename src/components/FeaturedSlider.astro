---
// File: src/components/FeaturedSlider.astro (Bản Hoàn chỉnh Cuối cùng - Sửa lỗi căn lề)
import type { Anime } from '../types';
interface Props {
  featuredAnimes: Anime[];
}

const { featuredAnimes } = Astro.props;
---

<div class="relative group mb-12">
  <div class="swiper featured-slider-container">
    <div class="swiper-wrapper">
      {featuredAnimes.map(anime => (
        <div class="swiper-slide">
          <a href={anime.href} class="block relative w-full h-80 rounded-lg overflow-hidden shadow-2xl group/slide">
            <img src={anime.banner_image || anime.largeImageUrl} alt={anime.title} class="absolute inset-0 w-full h-full object-cover object-center transition-transform duration-300 group-hover/slide:scale-105" width="1200" height="675" />
            <div class="absolute inset-0 bg-gradient-to-t from-gray-900 via-gray-900/80 to-transparent"></div>
            <div class="relative h-full flex flex-col justify-end p-8 text-white">
              <h2 class="text-4xl font-bold mb-2">{anime.title}</h2>
              <p class="text-gray-300 max-w-2xl text-sm hidden md:block">
                {anime.synopsis.split(' ').slice(0, 30).join(' ') + '...'}
              </p>
            </div>
          </a>
        </div>
      ))}
    </div>
    <div class="swiper-pagination featured-pagination"></div>

    <!-- Các nút bấm điều hướng đã được đưa vào trong và điều chỉnh vị trí -->
    <div class="swiper-button-prev featured-button-prev absolute top-1/2 -translate-y-1/2 left-4 w-10 h-10 flex items-center justify-center text-gray-400 opacity-0 group-hover:opacity-100 transition-all duration-300 cursor-pointer hover:text-white z-10">
      <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><path d="m15 18-6-6 6-6"/></svg>
    </div>
    <div class="swiper-button-next featured-button-next absolute top-1/2 -translate-y-1/2 right-4 w-10 h-10 flex items-center justify-center text-gray-400 opacity-0 group-hover:opacity-100 transition-all duration-300 cursor-pointer hover:text-white z-10">
      <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><path d="m9 18 6-6-6-6"/></svg>
    </div>
  </div>
</div>

<script>
  import Swiper from 'swiper';
  import { Navigation, Pagination, Autoplay } from 'swiper/modules';
  import 'swiper/css';
  import 'swiper/css/navigation';
  import 'swiper/css/pagination';

  const swiper = new Swiper('.featured-slider-container', {
    modules: [Navigation, Pagination, Autoplay],
    loop: true,
    autoplay: {
      delay: 5000,
      disableOnInteraction: false,
    },
    pagination: {
      el: '.featured-pagination',
      clickable: true,
    },
    navigation: {
      nextEl: '.featured-button-next',
      prevEl: '.featured-button-prev',
    },
  });
</script>

<style is:global>
  .featured-slider-container {
    /* Thêm thuộc tính này để đảm bảo các nút bấm nằm đúng vị trí */
    position: relative;
  }
  .featured-pagination .swiper-pagination-bullet-active {
    background-color: #06b6d4;
  }
</style>
